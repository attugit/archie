language: c++
os: linux
sudo: false

env:
  matrix:
    - TRAVIS_EMPTY_JOB_WORKAROUND=true

addons:
  apt:
    sources: &gcc
      - ubuntu-toolchain-r-test
    #sources: &llvm
    #  - ubuntu-toolchain-r-test
    #  - llvm-toolchain-precise
    #  - llvm-toolchain-precise-3.8

matrix:
  exclude:
    - env: TRAVIS_EMPTY_JOB_WORKAROUND=true

  include:
    - env: COMPILER=g++-6
      compiler: gcc
      addons: &gcc6
        apt:
          packages:
            - g++-6
            - libboost-all-dev
          sources: *gcc

  #allow_failures:
  #  - env: COMPILER=clang++-3.8
  #    compiler: clang
  #    addons: &clang38
  #      apt:
  #        packages:
  #          - clang-3.8
  #          - libboost-all-dev
  #        sources: *llvm

  fast_finish: true

before_install:
  - sudo add-apt-repository ppa:ubuntu-toolchain-r-test -y
  - sudo apt-get update -q
  - sudo apt-get install g++-5 libboost-all-dev -y
  - export CXX=$COMPILER
  - which $CXX

script:
  - rm -rf build;
  - CXX=$COMPILER ./waf distclean configure build --alltests -j1
  - CXX=$COMPILER ./waf distclean configure build_release --alltests -j1
